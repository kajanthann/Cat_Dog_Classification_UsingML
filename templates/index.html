<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Cat VS Dog Classifier</title>
  <link rel="icon" type="image/png" href="/static/web.png" />
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      background-image: url('/static/bg.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>

<body class="min-h-screen flex flex-col text-white relative">

  <!-- Dark Blur Layer -->
  <div class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>

  <!-- NAVBAR -->
  <nav class="relative z-10">
    <div class="p-3 bg-white/10 backdrop-blur-xl shadow-lg border-b border-white/20">
      <h1 class="text-4xl font-extrabold text-white text-center tracking-wide drop-shadow-lg">
        üê∂ Cat VS Dog Classifier üê±
      </h1>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="relative z-10 flex-grow flex items-center justify-center p-6">

    <div class="backdrop-blur-2xl bg-white/20 w-full max-w-4xl rounded-3xl shadow-2xl p-12 border border-white/30 text-white">

      <p class="text-center text-xl text-gray-100 mb-10 opacity-90">
        Upload an image ‚Äî the model will intelligently classify it as a <b>Cat</b> or <b>Dog</b>.
      </p>

      <!-- Upload Form -->
      <form action="/predict/" method="post" enctype="multipart/form-data">
        <div class="flex flex-col md:flex-row items-center gap-10">

          <!-- LEFT: Upload Box -->
          <label
            class="relative cursor-pointer border-2 border-dashed border-white/40 rounded-3xl p-10 w-full md:w-1/2 min-h-[230px] flex flex-col items-center justify-center bg-white/10 hover:bg-white/20 hover:border-white/80 transition-shadow shadow-xl">
            <input type="file" name="file" accept="image/*"
              class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
              onchange="previewImage(event)" required />

            <div id="upload-area" class="pointer-events-none text-center">
              <p class="text-white text-xl font-semibold">Click to upload</p>
              <p class="text-gray-300 text-sm mt-1">PNG ‚Ä¢ JPG ‚Ä¢ JPEG</p>
            </div>

            <img id="preview-img"
              class="hidden h-44 w-44 object-cover rounded-2xl shadow-2xl border border-white/40 mt-3 transition-all duration-300" />
          </label>

          <!-- RIGHT: Buttons -->
          <div class="flex flex-col gap-5 w-full md:w-1/3">
            <button type="submit"
              class="px-6 py-3 bg-indigo-600 text-white rounded-xl text-lg font-semibold hover:bg-indigo-700 hover:shadow-2xl transition transform hover:scale-[1.02]">
              Predict
            </button>

            <button type="button" onclick="goHome()"
              class="px-6 py-3 bg-white/20 text-white rounded-xl text-lg border border-white/40 hover:bg-white/30 hover:shadow-lg transition">
              Reset
            </button>
          </div>

        </div>
      </form>

      <!-- RESULT AREA -->
      {% if result %}
      <div class="mt-12 bg-white/30 backdrop-blur-xl p-6 rounded-2xl border border-white/40 shadow-xl transition-all">
        <div class="flex flex-col md:flex-row items-center justify-between gap-8">
          <div class="text-center md:text-left">
            <h2 class="text-3xl font-extrabold text-white drop-shadow-md">{{ result }}</h2>
            <p class="text-gray-200 mt-2 text-xl">
              Confidence: <b class="text-yellow-300">{{ probability * 100 }}%</b>
            </p>
          </div>
          <img src="{{ image_path }}" alt="result"
            class="h-44 w-44 object-cover rounded-2xl shadow-2xl border border-white/40" />
        </div>
      </div>
      {% endif %}

    </div>
  </main>

  <!-- JS -->
  <script>
    function previewImage(event) {
      const img = document.getElementById("preview-img");
      const uploadArea = document.getElementById("upload-area");

      const file = event.target.files[0];
      if (!file) return;

      img.src = URL.createObjectURL(file);
      img.classList.remove("hidden");
      uploadArea.classList.add("hidden");
    }

    function goHome() {
      window.location.href = '/'; // Redirects to home page
    }
  </script>

</body>

</html>
